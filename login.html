<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAliWW4PXhdXzoLJsqcen0i8Y9p65J1T8I",
    authDomain: "agrico-hub-attendance1.firebaseapp.com",
    projectId: "agrico-hub-attendance1",
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // üîë Automatically redirect if user is signed in
  onAuthStateChanged(auth, (user) => {
    if (user && window.location.pathname === "/login.html") {
      alert("‚úÖ Signed in as: " + user.email);
      window.location.href = "/"; // Go to homepage
    }
  });

  document.getElementById("googleBtn").addEventListener("click", async () => {
    const provider = new GoogleAuthProvider();
    provider.setCustomParameters({ prompt: "select_account" });
    try {
      await signInWithPopup(auth, provider);
    } catch (error) {
      console.error("Sign-in error:", error);
      alert("‚ùå Sign-in failed: " + (error.message || "Try again"));
    }
  });
</script>
